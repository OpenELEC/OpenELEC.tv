From 87f59ed6f5a8874b484a3af614a94a62c928c1e4 Mon Sep 17 00:00:00 2001
From: Lars Op den Kamp <lars@opdenkamp.eu>
Date: Tue, 13 Mar 2012 15:03:13 +0100
Subject: [PATCH] tvheadend add-on: don't destroy messages in the Parse...()
 methods. fixes crash when an invalid EPG result was
 received from the server. closes #452

---
 xbmc/pvrclients/tvheadend/HTSPData.cpp |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/xbmc/pvrclients/tvheadend/HTSPData.cpp b/xbmc/pvrclients/tvheadend/HTSPData.cpp
index 9add621..19943ba 100644
--- a/xbmc/pvrclients/tvheadend/HTSPData.cpp
+++ b/xbmc/pvrclients/tvheadend/HTSPData.cpp
@@ -999,7 +999,6 @@ bool CHTSPData::ParseEvent(htsmsg_t* msg, uint32_t id, SEvent &event)
   {
     XBMC->Log(LOG_DEBUG, "%s - malformed event", __FUNCTION__);
     htsmsg_print(msg);
-    htsmsg_destroy(msg);
     return false;
   }
   event.Clear();
-- 
1.7.5.4

